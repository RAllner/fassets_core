%h2.slidetitle New Slide
=form_for [presentation, Slide.new], :html => {:class => "collapsable_slide"} do |f|
  =render :partial => "/slides/form", :object => f, :locals => {:presentation => presentation}
  =submit_tag "Create"
%h2.topictitle New Topic
=form_for [presentation, Topic.new], :html => {:class => "collapsable_topic"} do |f|
  =render :partial => "/topics/form", :object => f, :locals => {:presentation => presentation}
  =submit_tag "Create"

%ol.collection{:id => "presentations.#{presentation.id}.topics.sort",:class => 'sortable_topics'}
  -presentation.topics.each do |topic|
    %li[topic]{:style => "padding-left:#{(1*topic.level)}em"}
      ="-" * topic.level + " " +topic.title
      -unless topic.slides.empty?        
        %ol.collection{:id => "presentations.#{presentation.id}.slides.sort", :class => 'sortable_slides', :topic_id => topic.id}
          -topic.slides.each do |slide|
            %li[slide]{:style => "padding-left:#{(1*topic.level)+1}em"}
              -if @slide && @slide.id == slide.id
                =slide.title
              -else
                =link_to slide.title, edit_presentation_slide_path(presentation, slide)
